<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enderland | Tienda Oficial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- CONFIGURACI√ìN BASE --- */
        :root {
            --primary: #9d00ff;
            --bg-dark: #0f0f0f;
            --bg-sidebar: #161616;
            --card-bg: #1e1e1e;
            --text: #ffffff;
            --text-muted: #b3b3b3;
            --category-title: #ff4747;
            --success: #00ff88;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- PANTALLA DE LOGIN (NICKNAME) --- */
        .login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(10px);
            transition: opacity 0.5s;
        }

        .login-box {
            background: #1a1a1a;
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--primary);
            text-align: center;
            width: 90%; max-width: 400px;
            box-shadow: 0 0 50px rgba(157, 0, 255, 0.3);
        }

        .login-avatar-preview {
            width: 100px; height: 100px;
            border-radius: 15px;
            margin: 0 auto 20px;
            border: 3px solid var(--primary);
            background-image: url('https://minotar.net/helm/Steve/100.png');
            background-size: cover;
            transition: background-image 0.3s;
        }

        .login-input {
            width: 100%; padding: 15px; margin-bottom: 20px;
            background: #2a2a2a; border: 2px solid #333; border-radius: 8px;
            color: #fff; font-size: 1.1rem; text-align: center; outline: none;
        }
        .login-input:focus { border-color: var(--primary); }

        .btn-enter {
            background: var(--primary); color: #fff; border: none; padding: 15px 30px;
            border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer;
            width: 100%; text-transform: uppercase; transition: 0.3s;
        }
        .btn-enter:hover { background: #7a00c7; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 280px;
            background-color: var(--bg-sidebar);
            height: 100%;
            display: flex; flex-direction: column;
            border-right: 1px solid #2a2a2a;
            padding: 20px;
            overflow-y: auto; flex-shrink: 0;
        }

        /* PERFIL EN SIDEBAR (NUEVO) */
        .sidebar-profile {
            display: flex; align-items: center; gap: 15px;
            background: rgba(255,255,255,0.05);
            padding: 15px; border-radius: 10px; margin-bottom: 30px;
            border: 1px solid #333;
        }
        .mini-avatar {
            width: 40px; height: 40px; border-radius: 8px;
            background-size: cover; border: 1px solid var(--primary);
        }
        .user-info div { font-weight: bold; font-size: 0.95rem; }
        .user-info span { font-size: 0.75rem; color: var(--success); }

        .brand { text-align: center; margin-bottom: 20px; }
        .brand h1 { font-size: 1.8rem; margin: 0; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px var(--primary); }

        .nav-category-title {
            color: var(--category-title); font-weight: 800; font-size: 0.85rem;
            margin: 20px 0 10px 10px; text-transform: uppercase; letter-spacing: 1px;
        }

        .nav-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 15px;
            color: var(--text-muted); text-decoration: none; border-radius: 6px;
            transition: 0.2s; cursor: pointer; margin-bottom: 5px; font-size: 0.95rem;
        }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { background: var(--primary); color: #fff; }
        .nav-item i { width: 20px; text-align: center; }

        .submenu-toggle { justify-content: space-between; }
        .submenu-toggle .arrow { font-size: 0.7rem; transition: transform 0.3s; }
        .submenu-toggle.open .arrow { transform: rotate(180deg); }
        
        .submenu { display: none; padding-left: 20px; margin-top: 5px; border-left: 2px solid #333; margin-left: 15px; }
        .submenu.show { display: block; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }

        /* --- CONTENIDO --- */
        .main-content { flex-grow: 1; height: 100vh; overflow-y: auto; padding: 40px; scroll-behavior: smooth; }

        section { margin-bottom: 100px; scroll-margin-top: 40px; }
        
        .section-header {
            border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 30px;
            display: flex; align-items: center; gap: 15px;
        }
        .section-header h2 { margin: 0; font-size: 2rem; text-transform: uppercase; }
        .section-header i { color: var(--primary); font-size: 1.8rem; }

        /* SWITCH PRECIOS */
        .pricing-toggle {
            background: #111; padding: 10px 20px; border-radius: 50px; border: 1px solid #333;
            display: inline-flex; align-items: center; gap: 15px; margin-bottom: 30px;
        }
        .switch { position: relative; width: 40px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(16px); }
        .price-label.active { color: var(--primary); font-weight: bold; }

        /* CARDS */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        
        .card {
            background: var(--card-bg); border: 1px solid #333; border-radius: 12px; padding: 25px;
            display: flex; flex-direction: column; position: relative; transition: 0.3s;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .card.netherite { border: 1px solid #5a0b0b; background: linear-gradient(145deg, #1e1e1e 0%, #290a0a 100%); }
        .card.netherite h3 { color: #ff5555; }
        .card h3 { font-size: 1.5rem; margin: 0 0 5px 0; color: var(--primary); text-transform: uppercase; }
        
        /* PRECIOS ARREGLADOS */
        .price-tag {
            font-size: 2.5rem; font-weight: 800; margin: 15px 0 20px; color: #fff;
            display: flex; align-items: baseline; gap: 5px;
        }
        .currency-symbol { font-size: 1.5rem; color: #888; font-weight: normal; }
        .currency-code { font-size: 1rem; color: #666; font-weight: bold; margin-left: 5px; }

        ul { list-style: none; padding: 0; margin: 0 0 20px 0; flex-grow: 1; }
        li { padding: 8px 0; border-bottom: 1px solid #2a2a2a; color: #ccc; font-size: 0.9rem; }
        li i { color: var(--primary); width: 25px; text-align: center; }

        .btn-add {
            background: transparent; border: 2px solid var(--primary); color: #fff; padding: 12px;
            width: 100%; border-radius: 6px; cursor: pointer; font-weight: bold; text-transform: uppercase; transition: 0.3s;
        }
        .btn-add:hover { background: var(--primary); }

        /* VANILLA & COMING SOON BOX */
        .placeholder-box {
            border: 2px dashed #444; background: rgba(0,0,0,0.2); height: 250px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #666; font-size: 1.1rem; border-radius: 10px; text-align: center; padding: 20px;
        }

        /* CARRITO FLOTANTE */
        .cart-float {
            position: fixed; bottom: 30px; right: 30px; background: var(--primary); width: 60px; height: 60px;
            border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.5rem;
            box-shadow: 0 0 20px rgba(0,0,0,0.5); cursor: pointer; z-index: 200; transition: transform 0.2s;
        }
        .cart-float:hover { transform: scale(1.1); }
        .cart-count {
            position: absolute; top: -5px; right: -5px; background: #ff004c; color: white;
            font-size: 0.8rem; width: 22px; height: 22px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center; font-weight: bold; border: 2px solid #fff;
        }

        /* MODAL */
        .cart-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8);
            z-index: 300; display: none; justify-content: center; align-items: center; backdrop-filter: blur(5px);
        }
        .modal-content {
            background: #1a1a1a; width: 90%; max-width: 500px; border-radius: 15px; padding: 30px;
            border: 1px solid var(--primary);
        }
        .cart-item { display: flex; justify-content: space-between; padding: 10px; background: #222; margin-bottom: 5px; border-radius: 5px; }

        /* ESTILOS NUEVOS PARA LA SECCI√ìN DE REGALO */
        .gift-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #333;
        }
        .gift-toggle {
            display: flex; align-items: center; gap: 10px;
            cursor: pointer; color: #ccc; font-size: 0.95rem;
            user-select: none;
        }
        .gift-toggle input { cursor: pointer; }
        .gift-input-field {
            display: none;
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 5px;
            color: #fff;
            outline: none;
            transition: 0.3s;
        }
        .gift-input-field:focus {
            border-color: var(--primary);
            background: #222;
        }

        @media (max-width: 768px) {
            body { flex-direction: column; overflow: auto; }
            .sidebar { width: 100%; height: auto; position: relative; }
            .main-content { height: auto; padding: 20px; overflow: visible; }
        }
    </style>
</head>
<body>

    <div class="login-overlay" id="login-overlay">
        <div class="login-box">
            <h2 style="margin-top:0; color:var(--primary);">IDENTIF√çCATE</h2>
            <p style="color:#ccc;">Ingresa tu Nick de Minecraft para continuar</p>
            
            <div class="login-avatar-preview" id="avatar-preview"></div>
            
            <input type="text" class="login-input" id="nick-input" placeholder="Ej: Steve" maxlength="16" oninput="updateSkin()">
            
            <button class="btn-enter" onclick="enterShop()">ENTRAR A LA TIENDA</button>
        </div>
    </div>

    <nav class="sidebar">
        <div class="brand">
            <h1>Enderland</h1>
        </div>

        <div class="sidebar-profile">
            <div class="mini-avatar" id="sidebar-avatar" style="background-image: url('https://minotar.net/helm/Steve/40.png');"></div>
            <div class="user-info">
                <div id="sidebar-username">Jugador</div>
                <span>En l√≠nea</span>
            </div>
        </div>

        <div class="nav-category-title">NAVEGACI√ìN</div>
        <a href="#inicio" class="nav-item active" id="btn-inicio">
            <i class="fas fa-home"></i> Inicio
        </a>

        <div class="nav-category-title">TIENDA</div>
        
        <div class="nav-item submenu-toggle" id="toggle-rangos" onclick="toggleSubmenu('rangos')">
            <div style="display:flex; gap:12px; align-items:center;">
                <i class="fas fa-shield-alt"></i> RANGOS
            </div>
            <i class="fas fa-chevron-down arrow"></i>
        </div>
        <div class="submenu show" id="submenu-rangos">
            <a href="#semi-anarquico" class="nav-item">Semi-An√°rquico</a>
            <a href="#vanilla-rangos" class="nav-item">Vanilla</a>
        </div>

        <div class="nav-item submenu-toggle" id="toggle-kits" onclick="toggleSubmenu('kits')">
            <div style="display:flex; gap:12px; align-items:center;">
                <i class="fas fa-box-open"></i> KITS
            </div>
            <i class="fas fa-chevron-down arrow"></i>
        </div>
        <div class="submenu" id="submenu-kits">
            <a href="#semi-kits" class="nav-item">Semi-An√°rquico</a>
            <a href="#vanilla-kits" class="nav-item">Vanilla</a>
        </div>

        <div class="nav-category-title">SOPORTE</div>
        <a href="https://discord.gg/PMYA2K3YWy" target="_blank" class="nav-item">
            <i class="fab fa-discord"></i> Discord
        </a>
    </nav>

    <main class="main-content" id="scroll-container">
        
        <section id="inicio">
            <div class="section-header">
                <i class="fas fa-info-circle"></i>
                <h2>Bienvenido</h2>
            </div>
            <div style="background: linear-gradient(90deg, #1f1f1f, transparent); padding: 40px; border-left: 5px solid var(--primary); border-radius: 8px;">
                <h3 style="margin-top: 0; color: var(--primary); font-size: 1.5rem;">ENDERLAND STORE</h3>
                <p style="color: #ccc; line-height: 1.6; font-size: 1.1rem;">
                    Seleccion√° una categor√≠a del men√∫ de la izquierda para ver los paquetes.
                    <br>Tus compras ayudan a mantener el servidor online y sin lag.
                </p>
                <div style="background: rgba(157,0,255,0.1); display: inline-block; padding: 10px 20px; border-radius: 5px; margin-top: 10px; cursor: pointer; border: 1px solid var(--primary);" onclick="copyIP()">
                    IP: <strong>play.enderland.org</strong> <i class="far fa-copy" style="margin-left: 10px;"></i>
                </div>
            </div>
        </section>

        <section id="semi-anarquico">
            <div class="section-header">
                <i class="fas fa-skull"></i>
                <h2>Rangos Semi-An√°rquico</h2>
            </div>

            <div class="pricing-toggle">
                <span class="price-label active" id="label-month-semi">Mensual</span>
                <label class="switch">
                    <input type="checkbox" id="price-switch-semi" onclick="togglePrice(this)">
                    <span class="slider"></span>
                </label>
                <span class="price-label" id="label-perm-semi">Permanente</span>
            </div>

            <div class="grid">
                <div class="card">
                    <h3>Cobre</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="1.00" data-p="1.60">1.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-box"></i> 1 Kit Semanal</li>
                        <li><i class="fas fa-check"></i> Prefijo [COBRE]</li>
                        <li><i class="fas fa-home"></i> 5 Sethomes</li>
                        <li><i class="fas fa-hat-wizard"></i> /hat</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Cobre (Semi)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3>Hierro</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="2.50" data-p="4.00">2.50</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-box"></i> 1 Kit Semanal</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Cobre</li>
                        <li><i class="fas fa-home"></i> 8 Sethomes</li>
                        <li><i class="fas fa-tools"></i> /workbench</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Hierro (Semi)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3>Oro</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="4.00" data-p="6.50">4.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-box"></i> 1 Kit Semanal</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Hierro</li>
                        <li><i class="fas fa-home"></i> 12 Sethomes</li>
                        <li><i class="fas fa-box-open"></i> /enderchest</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Oro (Semi)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3 style="color: #00e5ff;">Diamante</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="6.00" data-p="9.50">6.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-box"></i> 1 Kit Semanal</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Oro</li>
                        <li><i class="fas fa-skull"></i> /back al morir</li>
                        <li><i class="fas fa-bolt"></i> Tp instant√°neo</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Diamante (Semi)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3 style="color: #00ff88;">Esmeralda</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="8.00" data-p="12.50">8.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-box"></i> 1 Kit Semanal</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Diamante</li>
                        <li><i class="fas fa-utensils"></i> /feed y /near</li>
                        <li><i class="fas fa-home"></i> 40 Sethomes</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Esmeralda (Semi)', this)">A√±adir</button>
                </div>

                <div class="card netherite">
                    <h3>Netherite</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="10.00" data-p="16.00">10.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-crown"></i> <strong>TODO lo anterior</strong></li>
                        <li><i class="fas fa-home"></i> 100 Sethomes</li>
                        <li><i class="fas fa-hammer"></i> /repair</li>
                        <li><i class="fas fa-feather"></i> Fly en Lobby</li>
                        <li><i class="fas fa-mask"></i> /nick + KIT OP</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Netherite (Semi)', this)">A√±adir</button>
                </div>
            </div>
        </section>

        <section id="vanilla-rangos">
            <div class="section-header">
                <i class="fas fa-leaf"></i>
                <h2>Rangos Vanilla</h2>
            </div>
            
            <div class="pricing-toggle">
                <span class="price-label active" id="label-month-vanilla">Mensual</span>
                <label class="switch">
                    <input type="checkbox" id="price-switch-vanilla" onclick="togglePrice(this)">
                    <span class="slider"></span>
                </label>
                <span class="price-label" id="label-perm-vanilla">Permanente</span>
            </div>

            <div class="grid">
                <div class="card">
                    <h3>Aprendiz</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="1.00" data-p="1.60">1.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-seedling"></i> Kit Aprendiz</li>
                        <li><i class="fas fa-home"></i> 5 Sethomes</li>
                        <li><i class="fas fa-map-marker-alt"></i> /tpahere (Traer jugador)</li>
                        <li><i class="fas fa-hat-wizard"></i> /hat (Bloque cabeza)</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Aprendiz (Vanilla)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3>Explorador</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="2.50" data-p="4.00">2.50</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-compass"></i> Kit Explorador</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Aprendiz</li>
                        <li><i class="fas fa-home"></i> 8 Sethomes</li>
                        <li><i class="fas fa-tools"></i> /workbench (Mesa virtual)</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Explorador (Vanilla)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3>Guerrero</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="4.00" data-p="6.50">4.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-shield-alt"></i> Kit Guerrero</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Explorador</li>
                        <li><i class="fas fa-home"></i> 12 Sethomes</li>
                        <li><i class="fas fa-box-open"></i> /enderchest (Virtual)</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Guerrero (Vanilla)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3 style="color: #a335ee;">√âpico</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="6.00" data-p="9.50">6.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-gem"></i> Kit √âpico</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de Guerrero</li>
                        <li><i class="fas fa-home"></i> 20 Sethomes</li>
                        <li><i class="fas fa-skull"></i> /back (Volver al morir)</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango √âpico (Vanilla)', this)">A√±adir</button>
                </div>

                <div class="card">
                    <h3 style="color: #ffd700;">H√©roe</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="8.00" data-p="12.50">8.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-medal"></i> Kit H√©roe</li>
                        <li><i class="fas fa-arrow-up"></i> Todo lo de √âpico</li>
                        <li><i class="fas fa-home"></i> 40 Sethomes</li>
                        <li><i class="fas fa-utensils"></i> /feed (Saciar hambre)</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango H√©roe (Vanilla)', this)">A√±adir</button>
                </div>

                <div class="card netherite">
                    <h3>Leyenda</h3>
                    <div class="price-tag">
                        <span class="currency-symbol">$</span>
                        <span class="amount" data-m="10.00" data-p="16.00">10.00</span> 
                        <span class="currency-code">USD</span>
                    </div>
                    <ul>
                        <li><i class="fas fa-crown"></i> <strong>TODO lo anterior</strong></li>
                        <li><i class="fas fa-home"></i> 100 Sethomes</li>
                        <li><i class="fas fa-hammer"></i> /repair (Reparar mano)</li>
                        <li><i class="fas fa-feather"></i> /fly (Volar en Lobby)</li>
                        <li><i class="fas fa-palette"></i> Chat de Colores</li>
                    </ul>
                    <button class="btn-add" onclick="addToCart('Rango Leyenda (Vanilla)', this)">A√±adir</button>
                </div>
            </div>
        </section>

        <section id="semi-kits">
            <div class="section-header">
                <i class="fas fa-box-open"></i>
                <h2>Kits Semi-An√°rquico</h2>
            </div>
            <div class="grid">
                 <div class="placeholder-box" style="grid-column: 1 / -1; border-style: solid; border-color: #333;">
                    <i class="fas fa-tools" style="font-size: 2rem; margin-bottom: 15px; color: var(--primary);"></i>
                    <p>Aqu√≠ aparecer√°n los Kits de PvP y Construcci√≥n pronto.</p>
                </div>
            </div>
        </section>

        <section id="vanilla-kits">
            <div class="section-header">
                <i class="fas fa-archive"></i>
                <h2>Kits Vanilla</h2>
            </div>
            <div class="grid">
                <div class="placeholder-box" style="grid-column: 1 / -1;">
                    <i class="fas fa-lock" style="font-size: 2rem; margin-bottom: 15px; color: #555;"></i>
                    <p>Pr√≥ximamente Kits para la modalidad Vanilla.</p>
                </div>
            </div>
        </section>

    </main>

    <div class="cart-float" onclick="openCart()">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-count" id="cart-count">0</div>
    </div>

    <div class="cart-modal" id="cart-modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px;">
                <h3 style="margin:0;">Tu Carrito</h3>
                <i class="fas fa-times" onclick="closeCart()" style="cursor:pointer;"></i>
            </div>
            
            <div style="background: #222; padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9rem; color: #ccc;">
                Comprando como: <strong id="cart-username" style="color: var(--primary);">...</strong>
            </div>
            
            <div id="cart-items-container" style="max-height: 250px; overflow-y: auto;">
                <p style="text-align: center; color: #666;">Vac√≠o</p>
            </div>

            <div class="gift-section">
                <label class="gift-toggle">
                    <input type="checkbox" id="is-gift" onchange="toggleGiftInput()">
                    <span><i class="fas fa-gift" style="color: #ff4747;"></i> ¬øEs un regalo para otro jugador?</span>
                </label>
                <input type="text" id="gift-nickname" class="gift-input-field" placeholder="Ingresa el Nick exacto del destinatario...">
            </div>

            <div style="margin-top: 20px; text-align: right; font-size: 1.2rem; font-weight: bold; color: var(--success);">
                Total: $<span id="cart-total-price">0.00</span>
            </div>
            
            <button onclick="checkout()" style="width: 100%; padding: 15px; margin-top: 20px; background: var(--success); border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                <i class="fab fa-discord"></i> GENERAR PEDIDO
            </button>
        </div>
    </div>

    <script>
        // --- 1. LOGIN Y PERFIL ---
        let globalUser = "Invitado";

        function updateSkin() {
            const nick = document.getElementById("nick-input").value;
            const preview = document.getElementById("avatar-preview");
            const url = nick.length > 0 ? `https://minotar.net/helm/${nick}/100.png` : `https://minotar.net/helm/Steve/100.png`;
            preview.style.backgroundImage = `url('${url}')`;
        }

        function enterShop() {
            const input = document.getElementById("nick-input");
            const val = input.value.trim();
            
            if(val === "") {
                input.style.borderColor = "red";
                setTimeout(() => input.style.borderColor = "#333", 1000);
                return;
            }

            globalUser = val;
            
            // Actualizar Sidebar
            document.getElementById("sidebar-username").innerText = globalUser;
            document.getElementById("sidebar-avatar").style.backgroundImage = `url('https://minotar.net/helm/${globalUser}/40.png')`;
            document.getElementById("cart-username").innerText = globalUser;

            // Ocultar Overlay
            document.getElementById("login-overlay").style.opacity = "0";
            setTimeout(() => {
                document.getElementById("login-overlay").style.display = "none";
            }, 500);
        }

        // --- 2. MEN√öS Y SCROLL ---
        const mainContent = document.getElementById('scroll-container');
        const sections = document.querySelectorAll('section');
        const navItems = document.querySelectorAll('.sidebar a.nav-item');

        mainContent.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (mainContent.scrollTop >= (section.offsetTop - 150)) {
                    current = section.getAttribute('id');
                }
            });

            // Resaltar men√∫ lateral
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) {
                    item.classList.add('active');
                    
                    // Abrir submenu autom√°ticamente si es necesario
                    if(current.includes('semi') || current.includes('vanilla')) {
                        let parentType = current.includes('kits') ? 'kits' : 'rangos';
                        document.getElementById('submenu-' + parentType).classList.add('show');
                        document.getElementById('toggle-' + parentType).classList.add('open');
                    }
                }
            });
        });

        function toggleSubmenu(id) {
            document.getElementById('submenu-' + id).classList.toggle('show');
            document.getElementById('toggle-' + id).classList.toggle('open');
        }

        // --- 3. CARRITO Y PRECIOS ---
        let cart = [];
        let isPermanent = false;

        function togglePrice(sender) {
            // Sincronizar ambos switches si se pasa el sender
            if(sender) {
                isPermanent = sender.checked;
                // Sincroniza el otro switch para que visualmente coincidan
                const otherSwitchId = sender.id === 'price-switch-semi' ? 'price-switch-vanilla' : 'price-switch-semi';
                const otherSwitch = document.getElementById(otherSwitchId);
                if(otherSwitch) otherSwitch.checked = isPermanent;
            } else {
                // Fallback por si acaso
                isPermanent = document.getElementById('price-switch-semi').checked;
            }

            // Actualizar etiquetas visuales (Colores) en Semi
            const labelSemiM = document.getElementById("label-month-semi");
            const labelSemiP = document.getElementById("label-perm-semi");
            if(labelSemiM && labelSemiP) {
                labelSemiM.classList.toggle("active", !isPermanent);
                labelSemiP.classList.toggle("active", isPermanent);
            }

            // Actualizar etiquetas visuales (Colores) en Vanilla
            const labelVanM = document.getElementById("label-month-vanilla");
            const labelVanP = document.getElementById("label-perm-vanilla");
            if(labelVanM && labelVanP) {
                labelVanM.classList.toggle("active", !isPermanent);
                labelVanP.classList.toggle("active", isPermanent);
            }

            // Actualizar todos los precios de la p√°gina
            document.querySelectorAll(".amount").forEach(el => {
                el.innerText = isPermanent ? el.getAttribute("data-p") : el.getAttribute("data-m");
            });

            // Advertencia si hay items en el carrito
            if(cart.length > 0) {
                // Peque√±a l√≥gica para actualizar el tipo en el carrito sin borrarlo agresivamente,
                // o advertir al usuario. Por simplicidad en este caso, actualizamos el tipo.
                cart.forEach(item => {
                    item.type = isPermanent ? "Permanente" : "Mensual";
                    // Recalcular precio en base al nombre buscando en el DOM es complejo,
                    // as√≠ que simplificaremos vaciando o avisando.
                    // Para mejor UX, aqu√≠ solo notificamos visualmente en el updateCartUI si quisieramos.
                });
                // Opci√≥n simple: Vaciar para evitar conflictos de precios viejos vs nuevos
                if(!confirm("Cambiaste la moneda. Se actualizar√°n los items del carrito o se vaciar√° si hay conflicto. ¬øContinuar?")) {
                    // Revertir switch si cancela (l√≥gica compleja, lo dejamos simple: se vac√≠a)
                }
                cart = []; 
                updateCartUI();
            }
        }

        function addToCart(name, btn) {
            const card = btn.closest('.card');
            const price = parseFloat(card.querySelector('.amount').innerText);
            const type = isPermanent ? "Permanente" : "Mensual";
            cart.push({ name, price, type });
            updateCartUI();
            
            const originalText = btn.innerText;
            btn.innerText = "¬°Listo!";
            btn.style.borderColor = "var(--success)";
            setTimeout(() => { 
                btn.innerText = originalText; 
                btn.style.borderColor = "var(--primary)";
            }, 1000);
        }

        function updateCartUI() {
            document.getElementById("cart-count").innerText = cart.length;
            const container = document.getElementById("cart-items-container");
            container.innerHTML = "";
            let total = 0;

            if(cart.length === 0) container.innerHTML = '<p style="text-align: center; color: #666;">Vac√≠o</p>';
            
            cart.forEach((item, index) => {
                total += item.price;
                container.innerHTML += `
                    <div class="cart-item">
                        <div>${item.name} <small>(${item.type})</small></div>
                        <div>$${item.price.toFixed(2)} <i class="fas fa-trash" style="color:#ff5555; cursor:pointer; margin-left:10px;" onclick="removeFromCart(${index})"></i></div>
                    </div>`;
            });
            document.getElementById("cart-total-price").innerText = total.toFixed(2);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        // --- 4. FUNCI√ìN NUEVA: SISTEMA DE REGALO ---
        function toggleGiftInput() {
            const isGift = document.getElementById("is-gift").checked;
            document.getElementById("gift-nickname").style.display = isGift ? "block" : "none";
        }

        function checkout() {
            if(cart.length === 0) return alert("Carrito vac√≠o");
            
            const isGift = document.getElementById("is-gift").checked;
            const giftNick = document.getElementById("gift-nickname").value.trim();
            
            let msg = "";
            
            if(isGift) {
                if(!giftNick) return alert("Por favor, ingresa el Nickname del destinatario.");
                msg = `¬°Hola! Quiero realizar una compra para **REGALAR**.\n\nüë§ **De:** ${globalUser}\nüéÅ **Para:** ${giftNick}\n--------------------------------\n`;
            } else {
                msg = `¬°Hola! Quiero realizar una compra.\n\nüë§ **Usuario:** ${globalUser}\n--------------------------------\n`;
            }
            
            cart.forEach(i => msg += `‚Ä¢ ${i.name} [${i.type}] - $${i.price}\n`);
            msg += `--------------------------------\nüí∞ TOTAL: $${document.getElementById("cart-total-price").innerText} USD\n\nEspero instrucciones de pago.`;
            
            navigator.clipboard.writeText(msg);
            alert("Pedido copiado con √©xito. ¬°P√©galo en el ticket!");
            window.open("https://discord.gg/PMYA2K3YWy", "_blank");
        }

        function openCart() { document.getElementById("cart-modal").style.display = "flex"; }
        function closeCart() { document.getElementById("cart-modal").style.display = "none"; }
        function copyIP() { navigator.clipboard.writeText("play.enderland.org"); alert("IP Copiada"); }
    </script>
</body>
</html>
